'use strict';

var AddCompany = function AddCompany(id) {
    var nameIncome = DeleteInputForm();
    if (nameIncome == null) return;
    var name = nameIncome.companyName;
    var income = nameIncome.income;
    CreateInputForm(id);
    $$a({
        type: 'get',
        url: 'ajax.php', //url
        response: 'text',
        data: { id: id, name: name, income: income },
        success: function success(data) {
            InsertCompany(data);
        }
    });
};

var DeleteInputForm = function DeleteInputForm() {
    var companyName = document.getElementsByName("name").value;
    var income = document.getElementsByName("income").value;
    if (companyName == null || income == null) return null;

    var inputForm = document.getElementsByName("ImputForm");
    inputForm.parentNode.removeChild(inputForm);
    return { companyName: companyName, income: income };
};

var CreateInputForm = function CreateInputForm(id) {
    var inputForm = document.getElementsByName("ImputForm").length;
    if (inputForm != 0) return;

    var element = document.createElement('form');
    element.setAttribute("name", "ImputForm");
    element.setAttribute("class", "form-inline");
    element.setAttribute("role", 'form');

    if (id == -1) {
        var mainDiv = document.getElementById("AddCompanyDiv");
        mainDiv.appendChild(element);
    } else {
        var mainCompany = document.getElementById(id);
        mainCompany.appendChild(element);
    }

    var div = document.createElement('div');
    div.setAttribute("class", "form-group");
    element.appendChild(div);

    var node1 = document.createElement('label');
    node1.setAttribute("for", "name");
    node1.innerHTML = "Company name";
    div.appendChild(node1);

    var node2 = document.createElement('input');
    node2.setAttribute("name", "name");
    node2.setAttribute("type", "text");
    node2.setAttribute("class", "form-control");
    node2.setAttribute("placeholder", "name");
    div.appendChild(node2);

    var node3 = document.createElement('label');
    node3.setAttribute("for", "income");
    node3.innerHTML = "Income";
    div.appendChild(node3);

    var node4 = document.createElement('input');
    node4.setAttribute("name", "income");
    node4.setAttribute("type", "text");
    node4.setAttribute("class", "form-control");
    node4.setAttribute("placeholder", "money");
    div.appendChild(node4);

    var node5 = document.createElement('input');
    node5.setAttribute("value", "Submit");
    node5.setAttribute("type", "submit");
    node5.setAttribute("id", id);
    node5.setAttribute("class", "btn btn-info");
    node5.setAttribute("onclick", "AddCompany(this.id)");
    div.appendChild(node5);
};